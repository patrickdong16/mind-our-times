# Mind Our Times — 需求规格书

> **版本**：v1.0  
> **日期**：2026-02-04  
> **状态**：草稿，待 DQ 确认  
> **规则**：所有需求变更必须先更新本文件

---

## 一、产品定义

### 1.1 一句话

**Mind Our Times** 是一个由 AI 驱动的时代思想观测站 — 每日追踪全球顶级思想者的观点，每周五精选顶级播客深度对话，监测社会共识与时代情绪的微妙变化。

### 1.2 核心价值

| 层面 | 回答什么 |
|------|----------|
| **内容** | 今天最重要的思想碰撞是什么？ |
| **投票** | 社会共识正在往哪个方向漂移？ |
| **长期** | 哪些结构正在断裂、哪些价值正在被重估？ |

### 1.3 目标用户

- **核心用户**：DQ 及其投资圈子（高认知密度、关注长期趋势）
- **扩展用户**：关注时代议题的知识分子、媒体人、学者
- **访问方式**：完全公开，无需登录

### 1.4 产品不是什么

- ❌ 不是新闻聚合器（不追热点，追结构性问题）
- ❌ 不是社交平台（不做 feed 流、不做关注/粉丝）
- ❌ 不是内容管理系统（没有 CMS，Pepper 是唯一编辑）

---

## 二、系统架构

### 2.1 三层结构

```
┌──────────────────────────────────────────────┐
│  内容引擎 (Pepper, Mac mini)                  │
│  • 思想雷达 cron 每日生成                      │
│  • 10 篇短分析 + 1 篇综述 + 1 个投票问题       │
│  • 通过 API 写入 CloudBase                    │
└──────────────────┬───────────────────────────┘
                   ▼
┌──────────────────────────────────────────────┐
│  数据层 (腾讯云 CloudBase)                     │
│  • 云数据库：文章 + 投票 + 领域配置             │
│  • 云函数：读写 API（4-5 个函数）              │
└──────────────────┬───────────────────────────┘
                   ▼
┌──────────────────────────────────────────────┐
│  展示层                                       │
│  ┌─────────────────┬────────────────────────┐ │
│  │ Webapp          │ 公众号                  │ │
│  │ 今日 + 往期     │ 日度综述 + H5 投票      │ │
│  │ 领域标签筛选    │ 社交分发 + 引流 webapp  │ │
│  │ 评论 (Twikoo)   │ 微信原生分享            │ │
│  └─────────────────┴────────────────────────┘ │
└──────────────────────────────────────────────┘
```

### 2.2 技术选型

| 组件 | 技术 | 理由 |
|------|------|------|
| 内容引擎 | Python (Pepper 脚本) | 已有成熟的 RSS 抓取 + AI 分析管线 |
| 数据库 | CloudBase 云数据库 | 国内访问快，免费额度够用 |
| API | CloudBase 云函数 (Node.js) | 与数据库同平台，零网络延迟 |
| Webapp 前端 | 纯静态 HTML/CSS/JS | 无框架，轻量快速，移动端优先 |
| Webapp 托管 | CloudBase 静态托管（生产）+ Vercel（测试） | 国内可访问 |
| 评论系统 | Twikoo（基于 CloudBase） | 开源免费，零登录，自带反垃圾 |
| 公众号 | 微信公众号 API | 草稿自动生成，人工审核发布 |
| H5 投票 | CloudBase 云函数 + 静态页 | 嵌入公众号，数据自有 |

### 2.3 部署策略

| 环境 | 平台 | 用途 |
|------|------|------|
| 生产 | 腾讯云 CloudBase | 面向国内用户 |
| 测试/预览 | Vercel | DQ 和 Pepper 验收 |

---

## 三、领域系统

### 3.1 设计原则

- **只有一层领域标签**，无子频段
- **配置驱动**：领域定义存在数据库中，可随时增减
- 每个领域附带一个核心张力问题（用于投票系统的内核锚定）

### 3.2 初始领域（6 个）

| 标识 | 领域 | 核心问题 | 是 | 否 |
|------|------|----------|-----|-----|
| T | 技术 | AI 是否正在加剧社会分层？ | 正在加剧 | 趋向普惠 |
| P | 政治 | 民主制度是否正在失效？ | 正在失效 | 仍然有效 |
| H | 历史 | 当前文明是否正在走向衰退？ | 正在衰退 | 只是调整 |
| Φ | 哲学 | 算法优化是否正在侵蚀自由意志？ | 正在侵蚀 | 只是工具 |
| R | 宗教 | 科技是否正在成为新宗教？ | 正在替代 | 只是工具 |
| F | 金融 | 金融是否正在加剧社会撕裂？ | 正在加剧 | 可以修复 |

### 3.3 扩展规则

- 后续可增加领域（如艺术/文学），只需在配置中添加
- 每个领域必须有：标识符、中文名、核心问题、是/否标签
- 标识符全局唯一，一旦创建不可修改（历史数据依赖）

---

## 四、内容模型

### 4.1 短分析（daily_articles）

每日 10 篇，面向 webapp 展示。

| 字段 | 类型 | 必填 | 说明 |
|------|------|------|------|
| id | string | 自动 | 唯一标识 |
| date | string | ✅ | 发布日期 YYYY-MM-DD |
| domain | string | ✅ | 领域标识（T/P/H/Φ/R/F） |
| title | string | ✅ | 标题（中文） |
| author_name | string | ✅ | 原作者真实姓名 |
| author_intro | string | ✅ | 作者一句话介绍 |
| source | string | ✅ | 来源（媒体/会议 + 日期） |
| source_url | string | ✅ | 原文链接（必须真实可访问） |
| content | string | ✅ | 分析正文（300-400 字） |
| insight | string | ✅ | 💭 题外话（时代潜台词洞察，1-2 句） |
| created_at | timestamp | 自动 | 写入时间 |

### 4.2 日度综述（daily_digest）

每日 1 篇，面向公众号发布。

| 字段 | 类型 | 必填 | 说明 |
|------|------|------|------|
| id | string | 自动 | 唯一标识 |
| date | string | ✅ | 日期 YYYY-MM-DD |
| title | string | ✅ | 综述标题 |
| content | string | ✅ | 综述正文（1500-2500 字） |
| vote_question | string | ✅ | 今日投票问题（灵活措辞） |
| vote_domain | string | ✅ | 映射到哪个领域的核心问题 |
| vote_yes_label | string | ✅ | 「是」的具体表述 |
| vote_no_label | string | ✅ | 「否」的具体表述 |
| article_ids | array | ✅ | 引用了哪些短分析 |
| wechat_status | string | 自动 | draft / published |
| created_at | timestamp | 自动 | 写入时间 |

### 4.3 投票记录（votes）

| 字段 | 类型 | 必填 | 说明 |
|------|------|------|------|
| id | string | 自动 | 唯一标识 |
| digest_id | string | ✅ | 关联的综述 |
| domain | string | ✅ | 领域标识 |
| vote | string | ✅ | "yes" 或 "no" |
| voter_id | string | 自动 | 匿名标识（浏览器指纹或 openid） |
| created_at | timestamp | 自动 | 投票时间 |

### 4.4 领域配置（domains）

| 字段 | 类型 | 说明 |
|------|------|------|
| id | string | 领域标识（T/P/H/Φ/R/F） |
| name | string | 中文名 |
| core_question | string | 核心问题 |
| yes_label | string | 是方标签 |
| no_label | string | 否方标签 |
| sort_order | number | 显示排序 |
| active | boolean | 是否启用 |

### 4.5 播客解读（podcast_articles，2026-02-05 新增）

**每周五专题：** 从目标 YouTube 播客频道中选 5-8 集，做成标准解读文章

| 字段 | 类型 | 必填 | 说明 |
|------|------|------|------|
| id | string | 自动 | 唯一标识 |
| date | string | ✅ | 发布日期（每周五） |
| domain | string | ✅ | 领域标识（T/P/H/Φ/R/F） |
| title | string | ✅ | 播客标题（中文） |
| host | string | ✅ | 主持人 |
| guest | string | ✅ | 嘉宾 |
| channel | string | ✅ | 播客频道名 |
| episode_url | string | ✅ | YouTube 链接 |
| duration | string | ✅ | 时长（如"120分钟"） |
| content | string | ✅ | 解读正文（300-400字） |
| insight | string | ✅ | 💭 题外话 |
| published_date | string | ✅ | 播客发布日期（过去1个月内） |
| created_at | timestamp | 自动 | 写入时间 |

**选题标准：**
- 播客发布时间：过去 1 个月内
- 嘉宾质量：领域内 Top 1% 人物
- 题材分散：尽量覆盖多个领域，但不强制
- 思想密度：有结构性洞察，不是纯新闻播报

---

## 五、Webapp 需求

### 5.1 页面结构

**只有两个 Tab：今日 | 往期**

#### 今日页

```
┌─────────────────────────────────┐
│  Mind Our Times                 │
│  [今日]  [往期]                  │
├─────────────────────────────────┤
│  2026年2月4日 · 星期二           │
│                                 │
│  [全部] [技术] [政治] [...] [金融]│  ← 领域标签筛选
│                                 │
│  ┌─────────────────────────────┐│
│  │ ▍技术                       ││
│  │ GPT-5 定价策略的阶层含义     ││
│  │ Sam Altman · OpenAI CEO     ││
│  │                             ││
│  │ 正文 300-400 字...          ││
│  │                             ││
│  │ 💭 题外话：...              ││
│  │                             ││
│  │ 原文 → [链接]      2月3日   ││
│  └─────────────────────────────┘│
│                                 │
│  ┌─────────────────────────────┐│
│  │ ▍政治                       ││
│  │ ...                         ││
│  └─────────────────────────────┘│
│                                 │
│  ... (共 10 篇)                 │
│                                 │
│  ── 评论区 (Twikoo) ──         │
└─────────────────────────────────┘
```

#### 往期页

```
┌─────────────────────────────────┐
│  Mind Our Times                 │
│  [今日]  [往期]                  │
├─────────────────────────────────┤
│                                 │
│  [全部] [技术] [政治] [...] [金融]│  ← 领域标签筛选（跨日期）
│                                 │
│  ▸ 2026年2月4日 (10篇)          │  ← 按日期折叠
│  ▾ 2026年2月3日 (8篇)           │
│    ┌───────────────────────────┐│
│    │ ▍技术                     ││
│    │ 标题...                   ││
│    │ 摘要第一句...             ││
│    └───────────────────────────┘│
│    ...                          │
│  ▸ 2026年2月2日 (10篇)          │
│  ...                            │
└─────────────────────────────────┘
```

### 5.2 设计原则

| 原则 | 要求 |
|------|------|
| **移动端优先** | 主要使用场景是手机浏览 |
| **阅读体验** | 纽约客/端传媒风格，衬线字体，大量留白 |
| **零框架** | 纯 HTML/CSS/JS，无 React/Vue，保证加载速度 |
| **暗色模式** | 支持系统级暗色模式切换 |
| **无需登录** | 所有内容公开可读 |
| **无翻页** | 今日页直接展示全部内容；往期页按日期懒加载 |

### 5.3 交互细节

- 领域标签筛选：点击领域标签过滤内容，支持多选/取消
- 今日页：卡片默认全部展开，内容完整可读
- 往期页：按日期分组，默认折叠，点击展开
- 原文链接：在新标签页打开
- 评论区：今日页底部，Twikoo 组件
- 无下拉刷新（不需要，每日更新一次）

### 5.4 搜索功能（2026-02-05 新增）

**位置：** 往期页顶部

**功能：**
- 搜索框：输入关键词（如"特朗普"）
- 搜索范围：标题 + 正文内容
- 结果展示：高亮关键词，按日期倒序
- 实时搜索：输入时即时过滤

**技术实现：**
- 前端：搜索框 UI + 关键词高亮
- CloudBase 云函数：search API（全文检索）
- 数据库：title + content 字段索引

**MVP 范围：**
- 简单关键词匹配（不做分词、不做相关性排序）
- 单关键词搜索（不做多关键词 AND/OR）

### 5.5 功能边界（明确不做）

| 不做 | 理由 |
|------|------|
| 用户登录/注册 | 完全公开，无需身份 |
| 收藏/点赞 | 无用户系统 |
| 分享按钮 | 主要分享渠道是公众号，webapp 不是分享入口 |
| 推送通知 | 公众号承担推送职责 |
| PDF 导出 | 不再生成 PDF |

---

## 六、公众号需求

### 6.1 每日选题流程

```
Pepper 发布今日 webapp (10篇短分析)
    ↓
Pepper 立刻向 DQ 推荐 3 个深度选题
    ├── 选题标准：重要性、新闻性、思想性
    ├── 每个选题说明：为什么重要、为什么现在、为什么值得深度做
    └── DQ 从 3 个中确定 1 个
    ↓
Pepper 深度编译长文 (3000-5000字)
    ├── 完整翻译原文核心内容
    ├── 补充背景资料、作者介绍
    ├── 编者按：时代意义分析
    └── 质量标准：邸报/The Information 级别
    ↓
通过微信公众号 API 创建草稿
    ↓
DQ 人工审核
    ↓
DQ 确认发布
```

### 6.2 选题推荐标准

每天推荐 **3 个选题**，每个必须说明：

| 维度 | 说明 |
|------|------|
| **重要性** | 影响面、时代意义、对投资决策的价值 |
| **新闻性** | 时效性、当下关注度、话题性 |
| **思想性** | 深度、分析空间、可挖掘的洞察 |

**推荐格式：**
```
选题 1: [标题]
- 重要性：[说明]
- 新闻性：[说明]
- 思想性：[说明]
- 原文来源：[链接]
```

### 6.3 深度长文标准

| 要求 | 标准 |
|------|------|
| **字数** | 3000-5000 字 |
| **结构** | 编者按 + 完整翻译/编译 + 背景资料 + 作者介绍 |
| **质量** | 邸报/The Information/Stratechery 级别 |
| **原文处理** | 完整翻译核心论述，不是摘要 |
| **增值** | 补充背景、时代分析、编者观点 |

### 6.4 文章结构

```
┌─────────────────────────────────┐
│  [头图]                         │
│                                 │
│  Mind Our Times · 深度          │
│                                 │
│  ── 编者按 ──                   │
│  为什么这篇文章重要？            │
│  时代背景是什么？                │
│  200-300 字                     │
│                                 │
│  ────────────                   │
│                                 │
│  正文（完整翻译/编译）           │
│  3000-5000 字                   │
│  原文核心论述完整呈现            │
│                                 │
│  ── 背景资料 ──                 │
│  作者介绍、事件时间线等          │
│                                 │
│  ─────────────────              │
│  📖 查看今日全部 10 篇分析       │
│     → webapp 链接               │
│                                 │
│  关注「Mind Our Times」          │
│  每日推送 · 追踪时代思想脉搏     │
└─────────────────────────────────┘
```

### 6.5 质量案例

**参考标准（邸报）：**
- 选题：国际顶级媒体（Foreign Affairs, New Yorker, Economist）的封面文章
- 完整度：原文 5000-8000 词 → 中文 3000-5000 字（不丢核心论述）
- 增值：编者按点明时代背景，补充作者/事件资料
- 风格：知识分子转述，有判断力，不是机翻

### 6.6 播客日流程（每周五，2026-02-05 新增）

**时间：** 每周五

**内容来源：** 100% 来自过去 1 个月内顶级 YouTube 播客

**执行流程：**

```
每周五
    ↓
Pepper 扫描目标播客频道（16+ 个）
    ├── 筛选条件：过去 30 天内发布
    ├── 嘉宾质量：领域内 Top 1% 人物
    └── 初选 10-15 集播客
    ↓
Pepper 生成 5-8 篇播客解读文章
    ├── 题材尽量分散（T/P/H/Φ/R/F）
    ├── 每篇 300-400 字解读
    ├── 标准格式：主持人 + 嘉宾 + 核心观点 + 题外话
    └── 发布到 webapp（标记为"播客日"）
    ↓
Pepper 向 DQ 推荐 3 个播客长文选题
    ├── 选题标准：重要性、新闻性、思想性
    ├── 每个说明：为什么这集播客值得深度解读
    └── DQ 从 3 个中确定 1 个
    ↓
Pepper 深度解读播客（1500-2500字）
    ├── 编者按：为什么这个对话重要
    ├── 对话核心内容完整呈现
    ├── 背景资料：嘉宾介绍、话题背景
    └── 质量标准：邸报级别
    ↓
创建微信公众号草稿
    ↓
DQ 审核后发布
```

**播客频道来源：**
- 来自 `Thoughts-hunter/CONTENT_SOURCES.json` 的 `youtubeChannels` 列表
- 当前 16 个频道，后续可扩充
- 入选标准：主持人权威、嘉宾质量、内容深度、影响力

**与每日内容的区别：**
- 每日：RSS 文章，10 篇短分析
- 播客日：YouTube 播客，5-8 篇解读 + 1 篇深度长文

### 6.7 投票系统（2026-02-05 进入开发）

**功能：** 每篇深度长文附带"时代问题"投票

**位置：** 公众号文章底部，webapp 链接上方

**实现方式：**
- H5 投票页（CloudBase 静态托管）
- 嵌入公众号文章（iframe or 链接跳转）
- 投票后显示实时结果

**投票问题设计：**
- 与文章主题切合
- 映射到领域核心问题（T/P/H/Φ/R/F）
- 二选一格式（是/否）

**技术实现：**
- CloudBase 云函数：`vote` API（提交投票 + 查询结果）
- 数据库：`votes` 表（投票记录）+ `domains` 表（领域核心问题）
- 用户识别：微信 openid（每人每题限投一次）

**H5 投票页结构：**
```
┌─────────────────────────────────┐
│  今日之问                        │
│                                 │
│  Beckley 认为美国是唯一有效的   │
│  势力范围，你同意吗？            │
│                                 │
│  [同意]  [不同意]               │
│                                 │
│  已有 234 人参与投票             │
│  62% 同意 | 38% 不同意           │
│                                 │
│  📖 查看完整文章                │
└─────────────────────────────────┘
```

---

## 七、投票与趋势系统

### 7.1 数据结构

每次投票记录三层信息：

```
核心问题 (domain)     ← 固定不变（T/P/H/Φ/R/F 的核心问题）
  └── 每日变体 (vote_question)  ← 灵活措辞，紧贴时事
        └── 用户投票 (yes/no)   ← 匿名采样
```

### 7.2 趋势分析能力

| 分析维度 | 说明 |
|----------|------|
| 单领域趋势 | T 领域过去 90 天的「加剧 vs 普惠」比例变化曲线 |
| 跨领域对比 | 六大领域的当前共识分裂度排名 |
| 事件冲击 | 重大事件前后的情绪突变检测 |
| 季度报告 | 可输出「时代情绪季报」作为公众号特刊素材 |

### 7.3 数据展示

- **公众号文章内**：投票后实时显示当前结果
- **Webapp**（Phase 2）：趋势图表页，展示历史数据
- **Pepper 分析**：定期生成趋势洞察，供 DQ 参考

---

## 八、内容引擎（Pepper 侧）

### 8.1 现有资产复用

| 资产 | 来源 | 用途 |
|------|------|------|
| RSS 源配置 | `CONTENT_SOURCES.json`（40+ 源） | 直接复用 |
| RSS 抓取 + AI 分析 | `daily-briefing.py` | 改造输出目标 |
| 频段/领域定义 | 旧 REQUIREMENTS.md | 简化为 6 领域 |
| 微信发布逻辑 | 旧 `wechat-publisher.js` | 参考重写 |

### 8.2 Pepper 每日工作流

```
06:00 CST — 思想雷达 cron 触发
  │
  ├── Step 1: RSS 抓取 + AI 分析
  │   └── 产出 10 篇短分析 (300-400 字/篇)
  │
  ├── Step 2: 写入 CloudBase (daily_articles)
  │
  ├── Step 3: Telegram 通知 DQ
  │   └── "今日思想雷达已更新 + webapp 链接"
  │
  └── Step 4: DQ 开始对话后 → 立刻推荐 3 个深度选题
      ├── 每个选题说明：重要性、新闻性、思想性
      ├── DQ 确定 1 个
      ├── Pepper 深度编译 (3000-5000 字)
      │   └── 完整翻译 + 背景资料 + 编者按
      ├── 创建微信公众号草稿
      └── DQ 审核后发布
```

### 8.3 Telegram 降级

- 不再发送完整内容到 Telegram
- 仅发一条通知消息：「今日更新已就绪 + webapp 链接 + 公众号待审核」
- DQ 在 Telegram 里点链接去 webapp 阅读

### 8.4 内容质量规则

| 规则 | 要求 |
|------|------|
| **零虚构** | 所有 source_url 必须真实可访问 |
| **真实作者** | author_name 必须是真实人物 |
| **领域覆盖** | 每日 10 篇尽量覆盖 6 大领域（不强制每个都有） |
| **来源多样** | 同一天同作者最多 1 篇 |
| **中文输出** | 标题和正文均为中文 |

---

## 九、API 端点

### 9.1 写入 API（Pepper 调用）

| 端点 | 方法 | 说明 |
|------|------|------|
| `/api/articles/batch` | POST | 批量写入当日短分析 |
| `/api/digest` | POST | 写入当日综述 |

### 9.2 读取 API（Webapp 调用）

| 端点 | 方法 | 说明 |
|------|------|------|
| `/api/articles/today` | GET | 获取今日文章 |
| `/api/articles/archive` | GET | 获取往期文章（分页，支持领域筛选） |
| `/api/domains` | GET | 获取领域配置 |

### 9.3 投票 API（H5 投票组件调用）

| 端点 | 方法 | 说明 |
|------|------|------|
| `/api/vote` | POST | 提交投票 |
| `/api/vote/result/:digest_id` | GET | 获取投票结果 |
| `/api/vote/trend/:domain` | GET | 获取某领域的历史趋势 |

### 9.4 公众号 API（Pepper 调用）

| 端点 | 方法 | 说明 |
|------|------|------|
| `/api/wechat/draft` | POST | 创建公众号草稿 |
| `/api/wechat/publish/:id` | POST | 发布草稿（需 DQ 确认） |

### 9.5 安全

- 写入 API 需要 API Key 认证（环境变量配置）
- 读取 API 完全公开
- 投票 API 有频率限制（防刷）

---

## 十、分阶段交付

### Phase 1: MVP（目标 1-2 周）

- [x] CloudBase 项目初始化 + 云数据库 + 云函数
- [ ] 数据模型建表（articles, digest, domains）
- [ ] 写入 API（Pepper → CloudBase）
- [ ] 读取 API（Webapp → CloudBase）
- [ ] Webapp 两个 Tab（今日 + 往期 + 领域筛选）
- [ ] Pepper 脚本改造（输出目标从 Telegram 改为 CloudBase API）
- [ ] Vercel 测试部署
- [ ] CloudBase 静态托管上线
- [ ] Telegram 通知降级

### Phase 2: 公众号 + 投票

- [ ] 微信公众号 API 接入
- [ ] 综述自动生成（Pepper 第二步）
- [ ] H5 投票组件开发 + CloudBase 托管
- [ ] 投票数据表（votes）+ 投票 API
- [ ] 公众号草稿自动创建
- [ ] 投票结果实时展示

### Phase 3: 趋势与增长

- [ ] Twikoo 评论系统接入
- [ ] Webapp 趋势图表页（投票历史可视化）
- [ ] 域名备案（可选，提升微信内 webapp 链接体验）
- [ ] 「时代情绪季报」自动生成
- [ ] 搜索功能

---

## 十一、从 Thoughts-hunter 迁移

### 11.1 复用清单

| 资产 | 处理方式 |
|------|----------|
| `CONTENT_SOURCES.json` | 直接复制，作为 RSS 源配置 |
| 领域定义（6 大频段） | 简化为单层，写入 domains 配置 |
| `wechat-publisher.js` 逻辑 | 参考重写为 CloudBase 云函数 |
| `daily-briefing.py` | 改造输出目标 |
| Railway 后端 + PostgreSQL | **下线** |
| React Native APP | **废弃** |
| CMS | **废弃** |
| 旧 webapp (纽约客风格 HTML) | 设计风格参考，代码不复用 |

### 11.2 旧 Repo 处理

- `Thoughts-hunter` README 加注「已迁移至 mind-our-times」
- 归档，不删除（保留历史参考）

---

## 十二、变更记录

| 日期 | 版本 | 变更 |
|------|------|------|
| 2026-02-04 | v1.0 | 初始版本，DQ 确认产品方向后编写 |

---

*本文件是 Mind Our Times 项目的唯一需求来源。*
